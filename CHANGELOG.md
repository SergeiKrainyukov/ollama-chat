# История изменений

## [1.0.0] - 2024-12-10

### Преобразование в REST API сервер

Проект преобразован из desktop приложения (Compose Desktop) в полноценный REST API сервер для развёртывания на VPS.

### Добавлено

#### Новые файлы:
- `src/main/kotlin/Server.kt` - главный файл REST API сервера на Ktor
- `Dockerfile` - контейнеризация приложения
- `docker-compose.yml` - оркестрация сервисов (Ollama + API + Nginx)
- `nginx.conf` - конфигурация reverse proxy
- `.env.example` - шаблон переменных окружения
- `.dockerignore` - оптимизация Docker сборки

#### Документация:
- `README.md` - основная документация проекта
- `DEPLOYMENT.md` - подробная инструкция по развёртыванию на VPS
- `QUICKSTART.md` - краткая шпаргалка для быстрого старта
- `CHANGELOG.md` - история изменений

#### Скрипты:
- `deploy.sh` - автоматическое развёртывание на VPS
- `test_api_server.sh` - тестирование API endpoints

### Изменено

- `build.gradle.kts` - обновлены зависимости для Ktor Server вместо Compose Desktop
- `.gitignore` - добавлены правила для Docker, SSL, и т.д.

### Удалено

- Зависимости Compose Desktop (перенесены в архив)
- `Main.kt` и `ChatUI.kt` переименованы в `.old` (архив)

### API Endpoints

Сервер предоставляет следующие endpoints:

1. `GET /` - Главная страница с описанием API
2. `GET /health` - Проверка здоровья сервиса
3. `POST /api/chat` - Отправка сообщения в чат
4. `POST /api/clear` - Очистка истории чата
5. `GET /api/info` - Информация о сервисе

### Технические детали

- **Framework**: Ktor 2.3.7
- **Язык**: Kotlin 1.9.21
- **JVM**: Java 17
- **Контейнеризация**: Docker + Docker Compose
- **Reverse Proxy**: Nginx
- **LLM Platform**: Ollama

### Требования

- Docker и Docker Compose
- 8+ GB RAM (для модели qwen3:4b)
- 20+ GB свободного места
- Ubuntu 20.04/22.04 или Debian 11/12

### Особенности

- Поддержка сессий (контекст разговора)
- CORS включен для всех источников
- Обработка ошибок через StatusPages
- Настраиваемые таймауты для LLM запросов
- Готовая конфигурация Nginx с поддержкой SSL

### Инструкции по миграции

Если у вас была локальная версия с desktop UI:

1. Старые файлы сохранены как `*.old`
2. Для использования нового API сервера следуйте инструкциям в `QUICKSTART.md`
3. Для восстановления desktop версии переименуйте файлы обратно

### Известные изменения

- Desktop UI больше не используется (архивирован)
- Приложение теперь работает как headless сервер
- Доступ только через REST API
